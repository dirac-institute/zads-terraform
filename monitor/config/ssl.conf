Listen 443 https

SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog

SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300

SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin

SSLCryptoDevice builtin

<VirtualHost _default_:443>

  ServerName monitor.ztf.mjuric.org

  ErrorLog logs/ssl_error_log
  TransferLog logs/ssl_access_log
  LogLevel warn
  CustomLog logs/ssl_request_log "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

  <Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
  </Files>
  <Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
  </Directory>

  # configure SSL
  SSLEngine on
  ServerName monitor.ztf.mjuric.org
  SSLCertificateFile /etc/letsencrypt/live/monitor.ztf.mjuric.org/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/monitor.ztf.mjuric.org/privkey.pem
  Include /etc/letsencrypt/options-ssl-apache.conf
  SSLCertificateChainFile /etc/letsencrypt/live/monitor.ztf.mjuric.org/chain.pem

#    <Proxy *>
#        AuthType Basic
#        AuthName GrafanaAuthProxy
#        AuthBasicProvider file
#        AuthUserFile /etc/apache2/grafana_htpasswd
#        Require valid-user
#
#        RewriteEngine On
#        RewriteRule .* - [E=PROXY_USER:%{LA-U:REMOTE_USER},NS]
#        RequestHeader set X-WEBAUTH-USER "%{PROXY_USER}e"
#    </Proxy>
#
#    RequestHeader unset Authorization

    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

</VirtualHost>
